boardEncodings={rows:"ABCDEFGHI",cols:"123456789",cross:function(n,o){return[...n].flatMap((n=>[...o].map((o=>n+o))))}},boardEncodings.boxes=boardEncodings.cross(boardEncodings.rows,boardEncodings.cols),boardEncodings.row_units=boardEncodings.rows.split("").map((n=>boardEncodings.cross(n,boardEncodings.cols))),boardEncodings.column_units=boardEncodings.cols.split("").map((n=>boardEncodings.cross(boardEncodings.rows,n))),boardEncodings.square_units=["ABC","DEF","GHI"].flatMap((n=>["123","456","789"].map((o=>boardEncodings.cross(n,o))))),boardEncodings.unitlist=boardEncodings.row_units.concat(boardEncodings.column_units,boardEncodings.square_units),boardEncodings.units={};for(let n of boardEncodings.boxes){const o=[];for(let s of boardEncodings.unitlist)s.includes(n)&&o.push(s);boardEncodings.units[n]=o}boardEncodings.peers={};for(let n of boardEncodings.boxes)boardEncodings.peers[n]=new Set([].concat(...boardEncodings.units[n]).filter((o=>o!==n)));function gridValues(n){const o=[],s="123456789";for(let r of n)"."===r?o.push(s):s.includes(r)&&o.push(r);if(81!==o.length)throw new Error("Input grid does not have 81 characters!");const r={};for(let n=0;n<boardEncodings.boxes.length;n++)r[boardEncodings.boxes[n]]=o[n];return r}function eliminate(n){for(let o of Object.keys(n))if(1===n[o].length){const s=n[o];for(let r of boardEncodings.peers[o])n[r]=n[r].replace(s,"")}return n}function onlyChoice(n){for(let o of boardEncodings.unitlist)for(let s of"123456789"){const r=o.filter((o=>n[o].includes(s)));1===r.length&&(n[r[0]]=s)}return n}function reducePuzzle(n){let o=!1;for(;!o;){const s=Object.values(n).filter((n=>1===n.length)).length;eliminate(n),onlyChoice(n);if(o=s===Object.values(n).filter((n=>1===n.length)).length,Object.values(n).some((n=>0===n.length)))return!1}return n}function search(n){if(!(n=reducePuzzle(n)))return!1;if(Object.values(n).every((n=>1===n.length)))return n;const[o,s]=Object.entries(n).filter((([n,o])=>o.length>1)).reduce(((n,[o,s])=>s.length<n[1].length?[o,s]:n));for(let s of n[o]){const r={...n};r[o]=s;const e=search(r);if(e)return e}}