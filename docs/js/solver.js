"use strict";function _typeof(r){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(r)}function ownKeys(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach((function(e){_defineProperty(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}function _defineProperty(r,e,t){return(e=_toPropertyKey(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _toPropertyKey(r){var e=_toPrimitive(r,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(r,e){if("object"!==_typeof(r)||null===r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var n=t.call(r,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(t=t.call(r)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=a.call(t)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(r){l=!0,o=r}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0,o=function(){};return{s:o,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return i=r.done,r},e:function(r){u=!0,a=r},f:function(){try{i||null==t.return||t.return()}finally{if(u)throw a}}}}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var boardEncodings={rows:"ABCDEFGHI",cols:"123456789",cross:function(r,e){return _toConsumableArray(r).flatMap((function(r){return _toConsumableArray(e).map((function(e){return r+e}))}))}};boardEncodings.boxes=boardEncodings.cross(boardEncodings.rows,boardEncodings.cols),boardEncodings.row_units=boardEncodings.rows.split("").map((function(r){return boardEncodings.cross(r,boardEncodings.cols)})),boardEncodings.column_units=boardEncodings.cols.split("").map((function(r){return boardEncodings.cross(boardEncodings.rows,r)})),boardEncodings.square_units=["ABC","DEF","GHI"].flatMap((function(r){return["123","456","789"].map((function(e){return boardEncodings.cross(r,e)}))})),boardEncodings.unitlist=boardEncodings.row_units.concat(boardEncodings.column_units,boardEncodings.square_units),boardEncodings.units={};var _step,_iterator=_createForOfIteratorHelper(boardEncodings.boxes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step8,s=_step.value,x=[],_iterator8=_createForOfIteratorHelper(boardEncodings.unitlist);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var u=_step8.value;u.includes(s)&&x.push(u)}}catch(r){_iterator8.e(r)}finally{_iterator8.f()}boardEncodings.units[s]=x}}catch(r){_iterator.e(r)}finally{_iterator.f()}boardEncodings.peers={};var _step2,_iterator2=_createForOfIteratorHelper(boardEncodings.boxes);try{var _loop2=function(){var r,e=_step2.value;boardEncodings.peers[e]=new Set((r=[]).concat.apply(r,_toConsumableArray(boardEncodings.units[e])).filter((function(r){return r!==e})))};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop2()}catch(r){_iterator2.e(r)}finally{_iterator2.f()}function gridValues(r){var e,t=[],n="123456789",o=_createForOfIteratorHelper(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;"."===a?t.push(n):n.includes(a)&&t.push(a)}}catch(r){o.e(r)}finally{o.f()}if(81!==t.length)throw new Error("Input grid does not have 81 characters!");for(var i={},u=0;u<boardEncodings.boxes.length;u++)i[boardEncodings.boxes[u]]=t[u];return i}function eliminate(r){for(var e=0,t=Object.keys(r);e<t.length;e++){var n=t[e];if(1===r[n].length){var o,a=r[n],i=_createForOfIteratorHelper(boardEncodings.peers[n]);try{for(i.s();!(o=i.n()).done;){var u=o.value;r[u]=r[u].replace(a,"")}}catch(r){i.e(r)}finally{i.f()}}}return r}function onlyChoice(r){var e,t=_createForOfIteratorHelper(boardEncodings.unitlist);try{for(t.s();!(e=t.n()).done;){var n,o=e.value,a=_createForOfIteratorHelper("123456789");try{var i=function(){var e=n.value,t=o.filter((function(t){return r[t].includes(e)}));1===t.length&&(r[t[0]]=e)};for(a.s();!(n=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}}}catch(r){t.e(r)}finally{t.f()}return r}function reducePuzzle(r){for(var e=!1;!e;){var t=Object.values(r).filter((function(r){return 1===r.length})).length;if(eliminate(r),onlyChoice(r),e=t===Object.values(r).filter((function(r){return 1===r.length})).length,Object.values(r).some((function(r){return 0===r.length})))return!1}return r}function search(r){if(!(r=reducePuzzle(r)))return!1;if(Object.values(r).every((function(r){return 1===r.length})))return r;var e,t=Object.entries(r).filter((function(r){var e=_slicedToArray(r,2);e[0];return e[1].length>1})).reduce((function(r,e){var t=_slicedToArray(e,2),n=t[0],o=t[1];return o.length<r[1].length?[n,o]:r})),n=_slicedToArray(t,2),o=n[0],a=(n[1],_createForOfIteratorHelper(r[o]));try{for(a.s();!(e=a.n()).done;){var i=e.value,u=_objectSpread({},r);u[o]=i;var c=search(u);if(c)return c}}catch(r){a.e(r)}finally{a.f()}}